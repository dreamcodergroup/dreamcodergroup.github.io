/*********************************************************/
/* Created by Jingru Nie */
/* Copyright (c) 2014å¹´ DreamCoder. All rights reserved. */
/*********************************************************/

var inter=null;var last_id=["detail0_1","detail1_1","detail2_1","detail3_1"];function showDetail(a,b){if(inter){clearTimeout(inter);interval=null}var c="showDet("+a+", "+b+")";inter=window.setTimeout(c,200)}function showDet(a,b){var c=document.getElementById(last_id[a]);if(c){c.className="hid disappear"}var d="detail"+a+"_"+b;document.getElementById(d).className="hid show";last_id[a]=d}function disappear(a){a.className="hid"}var storage=window.localStorage;function showCart(a,b){document.getElementById("tprice"+a).innerHTML=0;var c=document.getElementById("shop"+a);if(c){var d=0;while(document.getElementById("shop"+d)){document.getElementById("shop"+d).className="shop";d++}c.className="shop show";restoreChoice(a,b)}}function restoreChoice(a,b){if(a<0)return;for(var i=0;i<b;++i){var c="s"+a+"_"+i;var d=storage.getItem(c);if(d!=""&&d!=null){d=c+"_"+d;document.getElementById(d).className="choice focus"}price(a,i,-1)}}function choice(a,b,c){if(a<0||b<0||c<0)return;price(a,b,c);changeLook(a,b,c)}function changeLook(a,b,c){var d="s"+a+"_"+b;var e=storage.getItem(d);var f=d+"_"+c;if(e!=c.toString()){document.getElementById(f).className="choice focus";storage.setItem(d,c);if(e!=""){var g=d+"_"+e;document.getElementById(g).className="choice"}}else{document.getElementById(f).className="choice";storage.setItem(d,"")}}function price(a,b,c){var d=parseInt(document.getElementById("tprice"+a).innerHTML);var e=storage.getItem("s"+a+"_"+b);if(e==""||e==null)e=-2;else e=parseInt(e);if(e==c){e=prices[a][b][e];c=-3}else{if(e<0)e=0;else e=prices[a][b][e]}var f=e;if(c>-1){f=prices[a][b][c];d=d-e+f}else{if(c==-1)d+=e;else d-=e}document.getElementById("tprice"+a).innerHTML=d;if(f>0)document.getElementById("sprice"+a).innerHTML=f}